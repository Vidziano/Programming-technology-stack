def process_numbers(array, proc_obj)
  # ĞŸĞµÑ€ĞµĞ²Ñ–Ñ€ĞºĞ°, Ñ‡Ğ¸ Ğ°Ñ€Ğ³ÑƒĞ¼ĞµĞ½Ñ‚ Ñ” Ğ¼Ğ°ÑĞ¸Ğ²Ğ¾Ğ¼
  unless array.is_a?(Array)
    raise ArgumentError, "ĞŸĞ¾Ğ¼Ğ¸Ğ»ĞºĞ°: ĞŸĞµÑ€ÑˆĞ¸Ğ¹ Ğ°Ñ€Ğ³ÑƒĞ¼ĞµĞ½Ñ‚ Ğ¼Ğ°Ñ” Ğ±ÑƒÑ‚Ğ¸ Ğ¼Ğ°ÑĞ¸Ğ²Ğ¾Ğ¼!"
  end

  puts "ĞŸÑ€Ğ¸Ğ¹Ğ½ÑÑ‚Ğ¸Ğ¹ Ğ¼Ğ°ÑĞ¸Ğ²: #{array.inspect}"

  # ĞŸĞµÑ€ĞµĞ²Ñ–Ñ€ĞºĞ°, Ñ‡Ğ¸ Ğ¼Ğ°ÑĞ¸Ğ² Ğ¼Ñ–ÑÑ‚Ğ¸Ñ‚ÑŒ Ñ‚Ñ–Ğ»ÑŒĞºĞ¸ Ñ‡Ğ¸ÑĞ»Ğ°
  unless array.all? { |el| el.is_a?(Numeric) }
    raise ArgumentError, "ĞŸĞ¾Ğ¼Ğ¸Ğ»ĞºĞ°: ĞœĞ°ÑĞ¸Ğ² Ğ¼Ğ°Ñ” Ğ¼Ñ–ÑÑ‚Ğ¸Ñ‚Ğ¸ Ñ‚Ñ–Ğ»ÑŒĞºĞ¸ Ñ‡Ğ¸ÑĞ»Ğ°!"
  end

  puts "ĞœĞ°ÑĞ¸Ğ² ÑĞºĞ»Ğ°Ğ´Ğ°Ñ”Ñ‚ÑŒÑÑ Ğ²Ğ¸ĞºĞ»ÑÑ‡Ğ½Ğ¾ Ğ· Ñ‡Ğ¸ÑĞµĞ». âœ…"

  # ĞŸĞµÑ€ĞµĞ²Ñ–Ñ€ĞºĞ°, Ñ‡Ğ¸ Ğ¿ĞµÑ€ĞµĞ´Ğ°Ğ½Ğ¾ Ğ¿Ñ€Ğ¾ĞºÑƒ
  unless proc_obj.is_a?(Proc)
    raise ArgumentError, "ĞŸĞ¾Ğ¼Ğ¸Ğ»ĞºĞ°: ĞŸĞ¾Ñ‚Ñ€Ñ–Ğ±Ğ½Ğ¾ Ğ¿ĞµÑ€ĞµĞ´Ğ°Ñ‚Ğ¸ Ğ¿Ñ€Ğ¾ĞºÑƒ Ğ´Ğ»Ñ Ğ¾Ğ±Ñ€Ğ¾Ğ±ĞºĞ¸ ĞµĞ»ĞµĞ¼ĞµĞ½Ñ‚Ñ–Ğ²!"
  end

  puts "ĞŸÑ€Ğ¾ĞºÑƒ Ğ¿ĞµÑ€ĞµĞ´Ğ°Ğ½Ğ¾. ĞŸĞ¾Ñ‡Ğ¸Ğ½Ğ°Ñ”Ğ¼Ğ¾ Ğ¾Ğ±Ñ€Ğ¾Ğ±ĞºÑƒ Ğ¼Ğ°ÑĞ¸Ğ²Ñƒ... ğŸ”„"

  # Ğ—Ğ°ÑÑ‚Ğ¾ÑÑƒĞ²Ğ°Ğ½Ğ½Ñ Ğ¿Ñ€Ğ¾ĞºĞ¸ Ğ´Ğ¾ ĞºĞ¾Ğ¶Ğ½Ğ¾Ğ³Ğ¾ ĞµĞ»ĞµĞ¼ĞµĞ½Ñ‚Ğ° Ğ¼Ğ°ÑĞ¸Ğ²Ñƒ
  result = array.map do |num|
    processed_value = proc_obj.call(num)
    puts "Ğ•Ğ»ĞµĞ¼ĞµĞ½Ñ‚ #{num} Ğ¾Ğ±Ñ€Ğ¾Ğ±Ğ»ĞµĞ½Ğ¾: #{processed_value}"
    processed_value
  end

  puts "Ğ ĞµĞ·ÑƒĞ»ÑŒÑ‚Ğ°Ñ‚ Ğ¾Ğ±Ñ€Ğ¾Ğ±ĞºĞ¸ Ğ¼Ğ°ÑĞ¸Ğ²Ñƒ: #{result.inspect}"
  result
end

# ĞŸÑ€Ğ¸ĞºĞ»Ğ°Ğ´Ğ¸ Ğ²Ğ¸ĞºĞ¾Ñ€Ğ¸ÑÑ‚Ğ°Ğ½Ğ½Ñ
numbers = [10, 20, 25, 40]
puts "\n=== ĞŸĞ¾Ñ‡Ğ°Ñ‚ĞºĞ¾Ğ²Ğ¸Ğ¹ Ğ¼Ğ°ÑĞ¸Ğ²: #{numbers.inspect} ===\n\n"

begin
  # 1. ĞœĞ½Ğ¾Ğ¶ĞµĞ½Ğ½Ñ Ğ½Ğ° 3
  puts "\n--- ĞŸÑ€Ğ¸ĞºĞ»Ğ°Ğ´ 1: ĞœĞ½Ğ¾Ğ¶ĞµĞ½Ğ½Ñ ĞºĞ¾Ğ¶Ğ½Ğ¾Ğ³Ğ¾ Ñ‡Ğ¸ÑĞ»Ğ° Ğ½Ğ° 3 ---"
  multiply_by_3 = Proc.new { |n| n * 3 }
  result1 = process_numbers(numbers, multiply_by_3)
  puts "ĞšÑ–Ğ½Ñ†ĞµĞ²Ğ¸Ğ¹ Ñ€ĞµĞ·ÑƒĞ»ÑŒÑ‚Ğ°Ñ‚: #{result1.inspect}\n"

  # 2. Ğ’Ñ–Ğ´Ğ½Ñ–Ğ¼Ğ°Ğ½Ğ½Ñ 5
  puts "\n--- ĞŸÑ€Ğ¸ĞºĞ»Ğ°Ğ´ 2: Ğ’Ñ–Ğ´Ğ½Ñ–Ğ¼Ğ°Ğ½Ğ½Ñ 5 Ğ²Ñ–Ğ´ ĞºĞ¾Ğ¶Ğ½Ğ¾Ğ³Ğ¾ Ñ‡Ğ¸ÑĞ»Ğ° ---"
  subtract_5 = Proc.new { |n| n - 5 }
  result2 = process_numbers(numbers, subtract_5)
  puts "ĞšÑ–Ğ½Ñ†ĞµĞ²Ğ¸Ğ¹ Ñ€ĞµĞ·ÑƒĞ»ÑŒÑ‚Ğ°Ñ‚: #{result2.inspect}\n"

  # 3. ĞŸÑ–Ğ´Ğ½ĞµÑĞµĞ½Ğ½Ñ Ğ´Ğ¾ ĞºĞ²Ğ°Ğ´Ñ€Ğ°Ñ‚Ñƒ
  puts "\n--- ĞŸÑ€Ğ¸ĞºĞ»Ğ°Ğ´ 3: ĞšĞ²Ğ°Ğ´Ñ€Ğ°Ñ‚ ĞºĞ¾Ğ¶Ğ½Ğ¾Ğ³Ğ¾ Ñ‡Ğ¸ÑĞ»Ğ° ---"
  square = Proc.new { |n| n**2 }
  result3 = process_numbers(numbers, square)
  puts "ĞšÑ–Ğ½Ñ†ĞµĞ²Ğ¸Ğ¹ Ñ€ĞµĞ·ÑƒĞ»ÑŒÑ‚Ğ°Ñ‚: #{result3.inspect}\n"

  # 4. Ğ£Ğ¼Ğ¾Ğ²Ğ°: Ğ¿Ğ¾Ğ´Ğ²Ğ¾Ñ—Ñ‚Ğ¸ Ñ‚Ñ–Ğ»ÑŒĞºĞ¸ Ğ¿Ğ°Ñ€Ğ½Ñ– Ñ‡Ğ¸ÑĞ»Ğ°
  puts "\n--- ĞŸÑ€Ğ¸ĞºĞ»Ğ°Ğ´ 4: ĞŸĞ¾Ğ´Ğ²Ğ¾Ñ—Ñ‚Ğ¸ Ñ‚Ñ–Ğ»ÑŒĞºĞ¸ Ğ¿Ğ°Ñ€Ğ½Ñ– Ñ‡Ğ¸ÑĞ»Ğ° ---"
  double_even = Proc.new { |n| n.even? ? n * 2 : n }
  result4 = process_numbers(numbers, double_even)
  puts "ĞšÑ–Ğ½Ñ†ĞµĞ²Ğ¸Ğ¹ Ñ€ĞµĞ·ÑƒĞ»ÑŒÑ‚Ğ°Ñ‚: #{result4.inspect}\n"

  # 5. ĞŸĞµÑ€ĞµĞ´Ğ°Ñ‡Ğ° Ğ½ĞµĞ¿Ñ€Ğ°Ğ²Ğ¸Ğ»ÑŒĞ½Ğ¾Ğ³Ğ¾ Ğ°Ñ€Ğ³ÑƒĞ¼ĞµĞ½Ñ‚Ñƒ (Ğ³ĞµĞ½ĞµÑ€ÑƒÑ”Ñ‚ÑŒÑÑ Ğ¿Ğ¾Ğ¼Ğ¸Ğ»ĞºĞ°)
  puts "\n--- ĞŸÑ€Ğ¸ĞºĞ»Ğ°Ğ´ 5: ĞŸĞ¾Ğ¼Ğ¸Ğ»ĞºĞ¾Ğ²Ğ¸Ğ¹ Ğ°Ñ€Ğ³ÑƒĞ¼ĞµĞ½Ñ‚ ---"
  process_numbers("not an array", multiply_by_3)

rescue ArgumentError => e
  puts "âŒ ĞŸĞ¾Ğ¼Ğ¸Ğ»ĞºĞ°: #{e.message}"
end
